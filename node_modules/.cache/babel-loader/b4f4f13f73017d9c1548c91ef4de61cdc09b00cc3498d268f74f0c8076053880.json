{"ast":null,"code":"import React from'react';import{useParams,useNavigate}from'react-router-dom';import'./CreatePost.css';import{useState,useEffect}from'react';import{supabase}from'../client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditPost=()=>{const{id}=useParams();const navigate=useNavigate();const[post,setPost]=useState({title:\"\",author:\"\",description:\"\",image:\"\"});const handleChange=event=>{const{name,value}=event.target;setPost(prev=>({...prev,[name]:value}));};const updatePost=async event=>{event.preventDefault();await supabase.from('Posts').update({title:post.title,author:post.author,description:post.description,image:post.image}).eq('id',id);navigate(\"/read\");};const deletePost=async event=>{event.preventDefault();await supabase.from('Posts').delete().eq('id',id);navigate(\"/read\");};useEffect(()=>{const fetchPost=async()=>{const{data}=await supabase.from('Posts').select().eq('id',id).single();if(data){setPost(data);}else{console.error('Failed to fetch post data');}};fetchPost();},[id]);return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:post.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"author\",children:\"Author\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"author\",name:\"author\",value:post.author,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"description\",name:\"description\",value:post.description,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image URL(optional)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"image\",name:\"image\",value:post.image,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"submit\",onClick:updatePost,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:deletePost,children:\"Delete\"})]})});};export default EditPost;","map":{"version":3,"names":["React","useParams","useNavigate","useState","useEffect","supabase","jsx","_jsx","jsxs","_jsxs","EditPost","id","navigate","post","setPost","title","author","description","image","handleChange","event","name","value","target","prev","updatePost","preventDefault","from","update","eq","deletePost","delete","fetchPost","data","select","single","console","error","className","children","htmlFor","type","onChange","onClick"],"sources":["C:/Users/rithi/OneDrive/Desktop/web stack/final - Copy/client/src/pages/EditPost.js"],"sourcesContent":["import React from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport './CreatePost.css';\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../client';\n\nconst EditPost = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const [post, setPost] = useState({ title: \"\", author: \"\", description: \"\", image: \"\" });\n\n    \n\n    const handleChange = (event) => {\n        const { name, value } = event.target;\n        setPost((prev) => ({\n            ...prev,\n            [name]: value,\n        }));\n    };\n\n    const updatePost = async (event) => {\n        event.preventDefault();\n        await supabase\n            .from('Posts')\n            .update({ title: post.title, author: post.author, description: post.description, image: post.image })\n            .eq('id', id);\n            navigate(\"/read\");\n        };\n\n    const deletePost = async (event) => {\n        event.preventDefault();\n        await supabase\n            .from('Posts')\n            .delete()\n            .eq('id', id);\n            navigate(\"/read\");\n        };\n\n        useEffect(() => {\n            const fetchPost = async () => {\n                const { data } = await supabase\n                    .from('Posts')\n                    .select()\n                    .eq('id', id)\n                    .single();\n        \n                if (data) {\n                    setPost(data);\n                } else {\n                    console.error('Failed to fetch post data');\n                }\n            };\n        \n            fetchPost();\n        }, [id]);\n\n    return (\n        <div className='post'>\n            <form>\n                <label htmlFor=\"title\">Title</label> <br />\n                <input type=\"text\" id=\"title\" name=\"title\" value={post.title} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"author\">Author</label> <br />\n                <input type=\"text\" id=\"author\" name=\"author\" value={post.author} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"description\">Description</label> <br />\n                <input type=\"text\" id=\"description\" name=\"description\" value={post.description} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"image\">Image URL(optional)</label><br />\n                <input type=\"text\" id=\"image\" name=\"image\" value={post.image} onChange={handleChange} /><br />\n                <br />\n\n                <button className=\"submit\" onClick={updatePost}>Submit</button>\n                <button className=\"delete\" onClick={deletePost}>Delete</button>\n            </form>\n        </div>\n    );\n};\n\nexport default EditPost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}