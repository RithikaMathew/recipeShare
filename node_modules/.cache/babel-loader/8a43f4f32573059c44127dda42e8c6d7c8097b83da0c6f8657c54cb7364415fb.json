{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Card.css';import more from'./more.png';import{Link}from'react-router-dom';import{supabase}from'../client';import{formatDistanceToNow}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Card=_ref=>{let{id,title,author,createdAt}=_ref;const[upvotes,setUpvotes]=useState(0);const timeAgo=formatDistanceToNow(new Date(createdAt),{addSuffix:true});useEffect(()=>{const fetchUpvotes=async()=>{const{data}=await supabase.from('Posts').select('upvotes').eq('id',id).single();if(data){setUpvotes(data.upvotes);}else{console.error('Failed to fetch upvotes');}};fetchUpvotes();},[id]);return/*#__PURE__*/_jsx(Link,{to:\"/detailview/\".concat(id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"Card\",children:[/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(id),children:/*#__PURE__*/_jsx(\"img\",{className:\"moreButton\",alt:\"edit button\",src:more})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted \",timeAgo,\" \"]}),/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsx(\"p\",{children:\"Author: \"+author}),/*#__PURE__*/_jsx(\"p\",{children:\"Upvotes: \"+upvotes})]})});};export default Card;","map":{"version":3,"names":["React","useState","useEffect","more","Link","supabase","formatDistanceToNow","jsx","_jsx","jsxs","_jsxs","Card","_ref","id","title","author","createdAt","upvotes","setUpvotes","timeAgo","Date","addSuffix","fetchUpvotes","data","from","select","eq","single","console","error","to","concat","children","className","alt","src"],"sources":["C:/Users/rithi/OneDrive/Desktop/web stack/final - Copy/client/src/components/Card.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Card.css';\nimport more from './more.png';\nimport { Link } from 'react-router-dom';\nimport { supabase } from '../client';\nimport { formatDistanceToNow } from 'date-fns';\n\nconst Card = ({ id, title, author, createdAt }) => {\n  \n  const [upvotes, setUpvotes] = useState(0);\n  const timeAgo = formatDistanceToNow(new Date(createdAt), { addSuffix: true });\n\n  useEffect(() => {\n    const fetchUpvotes = async () => {\n        const { data } = await supabase\n          .from('Posts')\n          .select('upvotes')\n          .eq('id', id)\n          .single();\n\n          if (data) {\n            setUpvotes(data.upvotes);\n        } else {\n            console.error('Failed to fetch upvotes');\n        }      \n    };\n\n    fetchUpvotes();\n  }, [id]);\n\n  return (\n    <Link to={`/detailview/${id}`}>\n      <div className=\"Card\">\n        <Link to={`/edit/${id}`}><img className=\"moreButton\" alt=\"edit button\" src={more} /></Link>\n        <p>Posted {timeAgo} </p>\n        <h2>{title}</h2>\n        <p>{\"Author: \" + author}</p>\n        <p >{\"Upvotes: \" + upvotes}</p>\n\n      </div>\n    </Link>\n  );\n};\n\nexport default Card;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,YAAY,CACnB,MAAO,CAAAC,IAAI,KAAM,YAAY,CAC7B,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,QAAQ,KAAQ,WAAW,CACpC,OAASC,mBAAmB,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAsC,IAArC,CAAEC,EAAE,CAAEC,KAAK,CAAEC,MAAM,CAAEC,SAAU,CAAC,CAAAJ,IAAA,CAE5C,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACzC,KAAM,CAAAkB,OAAO,CAAGb,mBAAmB,CAAC,GAAI,CAAAc,IAAI,CAACJ,SAAS,CAAC,CAAE,CAAEK,SAAS,CAAE,IAAK,CAAC,CAAC,CAE7EnB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAAlB,QAAQ,CAC5BmB,IAAI,CAAC,OAAO,CAAC,CACbC,MAAM,CAAC,SAAS,CAAC,CACjBC,EAAE,CAAC,IAAI,CAAEb,EAAE,CAAC,CACZc,MAAM,CAAC,CAAC,CAET,GAAIJ,IAAI,CAAE,CACRL,UAAU,CAACK,IAAI,CAACN,OAAO,CAAC,CAC5B,CAAC,IAAM,CACHW,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAC,CAC5C,CACJ,CAAC,CAEDP,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACT,EAAE,CAAC,CAAC,CAER,mBACEL,IAAA,CAACJ,IAAI,EAAC0B,EAAE,gBAAAC,MAAA,CAAiBlB,EAAE,CAAG,CAAAmB,QAAA,cAC5BtB,KAAA,QAAKuB,SAAS,CAAC,MAAM,CAAAD,QAAA,eACnBxB,IAAA,CAACJ,IAAI,EAAC0B,EAAE,UAAAC,MAAA,CAAWlB,EAAE,CAAG,CAAAmB,QAAA,cAACxB,IAAA,QAAKyB,SAAS,CAAC,YAAY,CAACC,GAAG,CAAC,aAAa,CAACC,GAAG,CAAEhC,IAAK,CAAE,CAAC,CAAM,CAAC,cAC3FO,KAAA,MAAAsB,QAAA,EAAG,SAAO,CAACb,OAAO,CAAC,GAAC,EAAG,CAAC,cACxBX,IAAA,OAAAwB,QAAA,CAAKlB,KAAK,CAAK,CAAC,cAChBN,IAAA,MAAAwB,QAAA,CAAI,UAAU,CAAGjB,MAAM,CAAI,CAAC,cAC5BP,IAAA,MAAAwB,QAAA,CAAK,WAAW,CAAGf,OAAO,CAAI,CAAC,EAE5B,CAAC,CACF,CAAC,CAEX,CAAC,CAED,cAAe,CAAAN,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}