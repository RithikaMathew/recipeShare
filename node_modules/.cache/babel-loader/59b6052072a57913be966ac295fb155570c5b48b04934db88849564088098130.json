{"ast":null,"code":"import React from'react';import{useParams}from'react-router-dom';import'./CreatePost.css';import{useState,useEffect}from'react';import{supabase}from'../client';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditPost=()=>{const{id}=useParams();// Get the id from the URL\nconst[post,setPost]=useState({title:\"\",author:\"\",description:\"\",image:\"\"});useEffect(()=>{const fetchPost=async()=>{const{data}=await supabase.from('Posts').select().eq('id',id)// Fetch the post with the id from the URL\n.single();// Since we're fetching a single post\nsetPost(data);};fetchPost();},[id]);// Fetch the post when the id changes\nconst handleChange=event=>{const{name,value}=event.target;setPost(prev=>({...prev,[name]:value}));};const updatePost=async event=>{event.preventDefault();await supabase.from('Posts').update({title:post.title,author:post.author,description:post.description,image:post.image}).eq('id',id);// Update the post with the id from the URL\nwindow.location=\"/read\";};const deletePost=async event=>{event.preventDefault();await supabase.from('Posts').delete()// Delete the post\n.eq('id',id);window.location=\"/read\";};return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:post.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"author\",children:\"Author\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"author\",name:\"author\",value:post.author,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"description\",name:\"description\",value:post.description,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image URL(optional)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"image\",name:\"image\",value:post.image,onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"submit\",onClick:updatePost,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:deletePost,children:\"Delete\"})]})});};export default EditPost;","map":{"version":3,"names":["React","useParams","useState","useEffect","supabase","jsx","_jsx","jsxs","_jsxs","EditPost","id","post","setPost","title","author","description","image","fetchPost","data","from","select","eq","single","handleChange","event","name","value","target","prev","updatePost","preventDefault","update","window","location","deletePost","delete","className","children","htmlFor","type","onChange","onClick"],"sources":["C:/Users/rithi/OneDrive/Desktop/web stack/final - Copy/client/src/pages/EditPost.js"],"sourcesContent":["import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport './CreatePost.css';\nimport { useState, useEffect } from 'react';\nimport { supabase } from '../client';\n\nconst EditPost = () => {\n    const { id } = useParams(); // Get the id from the URL\n    const [post, setPost] = useState({ title: \"\", author: \"\", description: \"\", image: \"\" });\n\n    useEffect(() => {\n        const fetchPost = async () => {\n            const { data } = await supabase\n                .from('Posts')\n                .select()\n                .eq('id', id) // Fetch the post with the id from the URL\n                .single(); // Since we're fetching a single post\n\n            setPost(data);\n        };\n\n        fetchPost();\n    }, [id]); // Fetch the post when the id changes\n\n    const handleChange = (event) => {\n        const { name, value } = event.target;\n        setPost((prev) => ({\n            ...prev,\n            [name]: value,\n        }));\n    };\n\n    const updatePost = async (event) => {\n        event.preventDefault();\n        await supabase\n            .from('Posts')\n            .update({ title: post.title, author: post.author, description: post.description, image: post.image })\n            .eq('id', id); // Update the post with the id from the URL\n        window.location = \"/read\";\n    };\n\n    const deletePost = async (event) => {\n        event.preventDefault();\n        await supabase\n            .from('Posts')\n            .delete() // Delete the post\n            .eq('id', id);\n        window.location = \"/read\";\n    };\n\n    return (\n        <div className='post'>\n            <form>\n                <label htmlFor=\"title\">Title</label> <br />\n                <input type=\"text\" id=\"title\" name=\"title\" value={post.title} onChange={handleChange} /><br />\n                <br />\n                \n                <label htmlFor=\"author\">Author</label> <br />\n                <input type=\"text\" id=\"author\" name=\"author\" value={post.author} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"description\">Description</label> <br />\n                <input type=\"text\" id=\"description\" name=\"description\" value={post.description} onChange={handleChange} /><br />\n                <br />\n\n                <label htmlFor=\"image\">Image URL(optional)</label><br />\n                <input type=\"text\" id=\"image\" name=\"image\" value={post.image} onChange={handleChange} /><br />\n                <br />\n\n                <button className=\"submit\" onClick={updatePost}>Submit</button>\n                <button className=\"delete\" onClick={deletePost}>Delete</button>\n            </form>\n        </div>\n    );\n};\n\nexport default EditPost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}